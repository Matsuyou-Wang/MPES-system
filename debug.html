<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿè¯Šæ–­é¡µé¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background-color: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background-color: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
        button { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>ğŸ”§ ç³»ç»Ÿè¯Šæ–­é¡µé¢</h1>
    
    <div class="status success">
        âœ… è¯Šæ–­é¡µé¢åŠ è½½æˆåŠŸ - æœåŠ¡å™¨è¿è¡Œæ­£å¸¸
    </div>

    <h2>ğŸ“‹ å¿«é€Ÿæ£€æµ‹</h2>
    <button onclick="testIndexPage()">æµ‹è¯•é¦–é¡µè·³è½¬</button>
    <button onclick="testGenderPage()">æµ‹è¯•æ€§åˆ«é€‰æ‹©é¡µé¢</button>
    <button onclick="testAnnotationPage()">æµ‹è¯•æ³¨é‡Šé¡µé¢</button>
    <button onclick="testCSS()">æµ‹è¯•CSSåŠ è½½</button>
    <button onclick="testJS()">æµ‹è¯•JavaScript</button>

    <div id="results" style="margin-top: 20px;"></div>

    <h2>ğŸ” ç³»ç»Ÿä¿¡æ¯</h2>
    <div class="status info">
        <strong>å½“å‰URL:</strong> <span id="currentUrl"></span><br>
        <strong>ç”¨æˆ·ä»£ç†:</strong> <span id="userAgent"></span><br>
        <strong>æ—¶é—´:</strong> <span id="currentTime"></span>
    </div>

    <h2>ğŸ“‚ é¡µé¢å¯¼èˆª</h2>
    <div style="margin: 10px 0;">
        <a href="index.html" style="margin-right: 10px;">é¦–é¡µ (index.html)</a>
        <a href="gender-selection.html" style="margin-right: 10px;">æ€§åˆ«é€‰æ‹© (gender-selection.html)</a>
        <a href="annotation.html" style="margin-right: 10px;">æ³¨é‡Šé¡µé¢ (annotation.html)</a>
        <a href="test-system.html" style="margin-right: 10px;">æµ‹è¯•é¡µé¢ (test-system.html)</a>
    </div>

    <h2>ğŸ“œ æœåŠ¡å™¨æ—¥å¿—æ£€æŸ¥</h2>
    <div id="serverLog" class="status info">
        æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ç½‘ç»œæ ‡ç­¾é¡µæŸ¥çœ‹è¯·æ±‚çŠ¶æ€
    </div>

    <script>
        // æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯
        document.getElementById('currentUrl').textContent = window.location.href;
        document.getElementById('userAgent').textContent = navigator.userAgent;
        document.getElementById('currentTime').textContent = new Date().toLocaleString();

        function showResult(message, isError = false) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = 'status ' + (isError ? 'error' : 'success');
            div.innerHTML = message;
            results.appendChild(div);
        }

        function testIndexPage() {
            try {
                showResult('ğŸ”„ æ­£åœ¨æµ‹è¯•é¦–é¡µè·³è½¬...');
                fetch('index.html')
                    .then(response => {
                        if (response.ok) {
                            showResult('âœ… index.html å“åº”æ­£å¸¸ (çŠ¶æ€: ' + response.status + ')');
                        } else {
                            showResult('âŒ index.html å“åº”å¼‚å¸¸ (çŠ¶æ€: ' + response.status + ')', true);
                        }
                    })
                    .catch(error => {
                        showResult('âŒ index.html è¯·æ±‚å¤±è´¥: ' + error.message, true);
                    });
            } catch (error) {
                showResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message, true);
            }
        }

        function testGenderPage() {
            try {
                showResult('ğŸ”„ æ­£åœ¨æµ‹è¯•æ€§åˆ«é€‰æ‹©é¡µé¢...');
                fetch('gender-selection.html')
                    .then(response => {
                        if (response.ok) {
                            showResult('âœ… gender-selection.html å“åº”æ­£å¸¸ (çŠ¶æ€: ' + response.status + ')');
                        } else {
                            showResult('âŒ gender-selection.html å“åº”å¼‚å¸¸ (çŠ¶æ€: ' + response.status + ')', true);
                        }
                    })
                    .catch(error => {
                        showResult('âŒ gender-selection.html è¯·æ±‚å¤±è´¥: ' + error.message, true);
                    });
            } catch (error) {
                showResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message, true);
            }
        }

        function testAnnotationPage() {
            try {
                showResult('ğŸ”„ æ­£åœ¨æµ‹è¯•æ³¨é‡Šé¡µé¢...');
                fetch('annotation.html')
                    .then(response => {
                        if (response.ok) {
                            showResult('âœ… annotation.html å“åº”æ­£å¸¸ (çŠ¶æ€: ' + response.status + ')');
                        } else {
                            showResult('âŒ annotation.html å“åº”å¼‚å¸¸ (çŠ¶æ€: ' + response.status + ')', true);
                        }
                    })
                    .catch(error => {
                        showResult('âŒ annotation.html è¯·æ±‚å¤±è´¥: ' + error.message, true);
                    });
            } catch (error) {
                showResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message, true);
            }
        }

        function testCSS() {
            try {
                showResult('ğŸ”„ æ­£åœ¨æµ‹è¯•CSSæ–‡ä»¶...');
                fetch('styles.css')
                    .then(response => {
                        if (response.ok) {
                            return response.text();
                        } else {
                            throw new Error('å“åº”çŠ¶æ€: ' + response.status);
                        }
                    })
                    .then(cssText => {
                        if (cssText.length > 100) {
                            showResult('âœ… styles.css åŠ è½½æ­£å¸¸ (å¤§å°: ' + cssText.length + ' å­—ç¬¦)');
                        } else {
                            showResult('âš ï¸ styles.css å†…å®¹å¯èƒ½ä¸å®Œæ•´ (å¤§å°: ' + cssText.length + ' å­—ç¬¦)', true);
                        }
                    })
                    .catch(error => {
                        showResult('âŒ styles.css åŠ è½½å¤±è´¥: ' + error.message, true);
                    });
            } catch (error) {
                showResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message, true);
            }
        }

        function testJS() {
            try {
                showResult('ğŸ”„ æ­£åœ¨æµ‹è¯•JavaScriptæ–‡ä»¶...');
                const files = ['data/videos-extended.js', 'js/app.js', 'js/tester.js', 'js/data-manager.js'];
                
                Promise.all(files.map(file => 
                    fetch(file)
                        .then(response => ({
                            file: file,
                            status: response.status,
                            ok: response.ok
                        }))
                        .catch(error => ({
                            file: file,
                            status: 'error',
                            error: error.message
                        }))
                )).then(results => {
                    results.forEach(result => {
                        if (result.ok) {
                            showResult('âœ… ' + result.file + ' åŠ è½½æ­£å¸¸');
                        } else {
                            showResult('âŒ ' + result.file + ' åŠ è½½å¤±è´¥: ' + (result.error || 'çŠ¶æ€ ' + result.status), true);
                        }
                    });
                });
            } catch (error) {
                showResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message, true);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡ŒåŸºæœ¬æ£€æµ‹
        window.addEventListener('load', function() {
            showResult('ğŸ‰ è¯Šæ–­é¡µé¢å·²å°±ç»ªï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•');
        });
    </script>
</body>
</html>